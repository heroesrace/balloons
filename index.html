<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Promotion Day - Cash Prizes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />
  
  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />

  <style>
    /* Основные стили */
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      font-family: 'Poppins', sans-serif;
      padding-bottom: 20px;
      min-height: 100vh;
      margin: 0;
      overflow-x: hidden;
      width: 100%;
    }
    
    .site-wrapper {
      width: 100%;
      max-width: 100%;
      margin: 0 auto;
      padding: 0 15px;
    }

    /* Улучшенная анимация для шариков */
    @keyframes balloonMove {
      0%   { transform: translateY(0) rotate(0deg); }
      50%  { transform: translateY(-15px) rotate(0deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }
    
    /* Основной заголовок */
    .main-heading {
      font-weight: 700;
      font-size: 2.5rem;
      color: #2c3e50;
      text-align: center;
      margin-bottom: 20px;
      padding-top: 20px;
      position: relative;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      width: 100%;
    }
    
    .main-heading:after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 180px;
      height: 4px;
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
      border-radius: 3px;
    }
    
    /* Стили для блока с шариками */
    .balloons-container {
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      padding: 15px;
      position: relative;
      overflow: hidden;
      width: 100%;
    }
    
    .balloons-container:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #ffd700, #ffaa00, #ff8800, #ffd700);
      background-size: 200% 200%;
      animation: shimmer 3s linear infinite;
    }
    
    /* Стили для блока с правилами */
    .rules-section {
      font-size: 0.95em;
      padding: 20px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.8);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      max-height: calc(100vh - 260px);
      overflow-y: auto;
      width: 100%;
    }
    
    .rules-section h4 {
      color: #2c3e50;
      position: relative;
      padding-bottom: 8px;
      margin-bottom: 15px;
      font-weight: 600;
      font-size: 1.2rem;
      display: inline-block;
    }
    
    .rules-section h4:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
    }
    
    .rules-section ul {
      padding-left: 20px;
      margin-bottom: 15px;
      column-count: 2;
      column-gap: 20px;
    }
    
    .rules-section li {
      margin-bottom: 6px;
      position: relative;
      font-size: 0.95rem;
      break-inside: avoid;
    }
    
    .rules-section p {
      margin-bottom: 12px;
      font-size: 0.95rem;
    }
    
    /* Стили для шариков в один ряд на всю ширину */
    .balloons-row {
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      flex-wrap: nowrap;
      width: 100%;
    }
    
    .balloon-wrapper {
      text-align: center;
      margin: 0;
      flex: 1 1 0;
      transition: all 0.3s ease;
      padding: 0 10px;
    }
    
    .balloon {
      width: 150px;
      height: 180px;
      max-width: 100%;
      margin: 0 auto;
      animation: balloonMove 4s ease-in-out infinite;
      cursor: pointer;
      transition: transform 0.3s ease;
      filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
    }
    
    .balloon:hover {
      transform: scale(1.15);
    }
    
    .balloon-label {
      font-weight: 600;
      color: #2c3e50;
      margin-top: 6px;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .deposit-amount {
      color: #e67e22;
      font-weight: 700;
      display: block;
      font-size: 1.1rem;
      margin-top: 3px;
    }
    
    /* Стили для таблицы агентов */
    .agent-table-container {
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
      max-height: calc(100vh - 330px);
      overflow-y: auto;
      width: 100%;
    }
    
    .agent-table-container h4 {
      color: #2c3e50;
      position: relative;
      padding-bottom: 8px;
      margin-bottom: 15px;
      font-weight: 600;
      font-size: 1.2rem;
    }
    
    .agent-table-container h4:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 80px;
      height: 2px;
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
    }
    
    .agent-table {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      margin-bottom: 0;
      width: 100%;
    }
    
    .agent-table thead {
      background: linear-gradient(90deg, #f6d365 0%, #fda085 100%);
      color: #fff;
    }
    
    .agent-table thead th {
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.9rem;
      padding: 12px 15px;
      border: none;
    }
    
    .agent-table tbody td {
      padding: 12px 15px;
      border-color: #eee;
      vertical-align: middle;
      font-size: 0.95rem;
    }
    
    .agent-row {
      transition: all 0.2s ease;
    }
    
    .agent-row:hover {
      background-color: rgba(255, 248, 220, 0.8);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .agent-name {
      font-weight: 600;
      color: #2c3e50;
    }
    
    .agent-deposit {
      font-weight: 700;
      color: #e67e22;
    }
    
    .cash-prize {
      font-weight: 700;
      color: #2ecc71;
      background: rgba(46, 204, 113, 0.1);
      padding: 4px 8px;
      border-radius: 4px;
      margin-left: 8px;
      display: inline-block;
      font-size: 0.9rem;
    }
    
    /* Анимации */
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    /* Конфетти */
    .confetti {
      position: absolute;
      width: 8px;
      height: 8px;
      background-color: #ffd700;
      opacity: 0.7;
      border-radius: 50%;
      animation: confettiAnimation 5s linear infinite;
      z-index: -1;
    }
    
    @keyframes confettiAnimation {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    /* Стили для индикатора автоперезагрузки */
    .auto-reload-indicator {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background-color: rgba(0,0,0,0.6);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.8rem;
      z-index: 1000;
    }
    
    /* Рефакторинг для мобильных устройств */
    @media (max-width: 992px) {
      .site-wrapper {
        padding: 0 10px;
      }
      
      .main-heading {
        font-size: 2rem;
      }
      
      .balloon {
        width: 130px;
        height: 160px;
      }
      
      .balloon-wrapper {
        padding: 0 5px;
      }
      
      .rules-section ul {
        column-count: 1;
      }
    }
    
    @media (max-width: 768px) {
      .main-heading {
        font-size: 1.8rem;
      }
      
      .balloon {
        width: 110px;
        height: 140px;
      }
      
      .balloon-wrapper {
        padding: 0 3px;
      }
      
      .balloon-label {
        font-size: 0.8rem;
      }
      
      .deposit-amount {
        font-size: 0.9rem;
      }
    }
    
    /* Для лучшего заполнения экрана */
    .container-fluid {
      padding: 0 5px;
      width: 100%;
    }
    
    .row {
      width: 100%;
      margin: 0;
    }
    
    .col-lg-8, .col-lg-4 {
      padding: 0 10px;
    }

    /* Стили для более компактной таблицы агентов */
    .agent-table-container {
      max-height: none; /* Убираем ограничение высоты, чтобы избежать скроллинга */
      overflow-y: visible;
      padding: 12px 15px;
      margin-bottom: 15px;
    }

    .table-sm thead th {
      padding: 8px 10px;
      font-size: 0.85rem;
    }

    .table-sm tbody td {
      padding: 6px 10px;
      font-size: 0.9rem;
    }

    .agent-name {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .agent-deposit {
      font-weight: 700;
      font-size: 0.9rem;
    }

    .cash-prize {
      font-size: 0.8rem;
      padding: 2px 6px;
      margin-left: 4px;
    }

    /* Уменьшаем отступы для оптимизации высоты */
    .agent-table-container h4 {
      margin-bottom: 10px;
      font-size: 1.1rem;
    }
  </style>
</head>
<body>
  <!-- Контейнер для React-приложения -->
  <div id="root"></div>

  <!-- Подключаем React и ReactDOM (через cdnjs) -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"
    crossorigin="anonymous"
  ></script>

  <!-- Babel Standalone (через cdnjs) -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.19.3/babel.min.js"
    crossorigin="anonymous"
  ></script>

  <!-- Наш скрипт с JSX-кодом -->
  <script type="text/babel">
    // Данные для отображения шаров
    const balloonData = [
      { id: 1, img: "gold.png", deposit: "???",  label: "Gold Balloon" },
      { id: 2, img: "gold.png", deposit: "???",  label: "Gold Balloon" },
      { id: 3, img: "gold.png", deposit: "???",  label: "Gold Balloon" },
      { id: 4, img: "gold.png", deposit: "???",  label: "Gold Balloon" },
      { id: 5, img: "gold.png", deposit: "???", label: "Gold Balloon" }
    ];

    // Конфетти компонент
    function Confetti() {
      const [confetti, setConfetti] = React.useState([]);
      
      React.useEffect(() => {
        // Создаем 20 частиц конфетти
        const confettiElements = [];
        const colors = ['#ffd700', '#ff6b6b', '#48dbfb', '#1dd1a1', '#f368e0', '#ff9f43'];
        
        for (let i = 0; i < 20; i++) {
          confettiElements.push({
            id: i,
            left: `${Math.random() * 100}%`,
            size: `${Math.random() * 10 + 5}px`,
            backgroundColor: colors[Math.floor(Math.random() * colors.length)],
            delay: `${Math.random() * 5}s`,
            duration: `${Math.random() * 3 + 3}s`,
          });
        }
        
        setConfetti(confettiElements);
      }, []);
      
      return (
        <div style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', pointerEvents: 'none', zIndex: -1 }}>
          {confetti.map(item => (
            <div 
              key={item.id}
              className="confetti"
              style={{
                left: item.left,
                width: item.size,
                height: item.size,
                backgroundColor: item.backgroundColor,
                animationDelay: item.delay,
                animationDuration: item.duration
              }}
            />
          ))}
        </div>
      );
    }

    // Компонент Balloons – отображает полосу золотых шаров в один ряд по горизонтали на всю ширину
    function Balloons() {
      return (
        <div className="balloons-container">
          <div className="balloons-row">
            {balloonData.map(item => (
              <div key={item.id} className="balloon-wrapper">
                <Balloon imageSrc={item.img} label={item.label} />
                <div className="balloon-label">
                  {item.label} <span className="deposit-amount">{item.deposit}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    }

    // Компонент Balloon – один золотой шар
    function Balloon({ imageSrc, label }) {
      return (
        <div className="balloon" title={label}>
          <img 
            src={imageSrc} 
            alt={label} 
            style={{ width: "100%", height: "100%", objectFit: "contain" }} 
          />
        </div>
      );
    }

    // Компонент RulesSection – блок с правилами
    function RulesSection() {
      return (
        <div className="rules-section">
          <h4><i className="fas fa-scroll me-2"></i>RULES</h4>
          <p>There are all the same color ballons and anyone can pop any ballon if they make a deposit or have a POP.</p>
          <p><strong>Deposit amounts accepted and added to commission payments:</strong></p>
          <ul>
            <li>$1,000</li>
            <li>$2,500</li>
            <li>$5,000</li>
            <li>$7,500</li>
            <li>$10,000</li>
            <li>$12,500</li>
            <li>$15,000</li>
            <li>$20,000</li>
            <li>$25,000</li>
            <li>$35,000</li>
            <li>$50,000</li>
            <li>$75,000</li>
            <li>$100,000</li>
          </ul>
          <p><strong>All the amount needs to be from one client.</strong></p>
        </div>
      );
    }

    // Компонент таблицы агентов - оптимизированный для группировки транзакций по агенту
    function AgentTable({ agents }) {
      function getBalloonImage(deposit) {
        if (deposit >= 1000) return "gold.png";
        return "";
      }

      // Уменьшенный размер шариков
      const balloonContainerStyle = {
        width: "35px",
        height: "45px",
        animation: "balloonMove 3s ease-in-out infinite"
      };

      const balloonImgStyle = {
        width: "100%",
        height: "100%",
        objectFit: "contain"
      };

      // Группируем транзакции по имени агента
      const groupedAgents = {};
      agents.forEach(agent => {
        if (!groupedAgents[agent.name]) {
          groupedAgents[agent.name] = {
            name: agent.name,
            deposits: [agent.deposit],
            cashPrizes: [agent.cashPrize]
          };
        } else {
          groupedAgents[agent.name].deposits.push(agent.deposit);
          groupedAgents[agent.name].cashPrizes.push(agent.cashPrize);
        }
      });

      // Преобразуем сгруппированный объект обратно в массив
      const consolidatedAgents = Object.values(groupedAgents);

      return (
        <div className="agent-table-container">
          <h4><i className="fas fa-user-tie me-2"></i>Agent Deposits</h4>
          <div className="table-responsive">
            <table className="table table-bordered agent-table table-sm">
              <thead>
                <tr>
                  <th><i className="fas fa-user me-1"></i>Agent Name</th>
                  <th><i className="fas fa-dollar-sign me-1"></i>Deposit</th>
                  <th><i className="fas fa-certificate me-1"></i>Balloon</th>
                </tr>
              </thead>
              <tbody>
                {consolidatedAgents.map((agent, index) => {
                  return (
                    <tr key={index} className="agent-row">
                      <td className="agent-name">{agent.name}</td>
                      <td className="agent-deposit">
                        {agent.deposits.map((deposit, i) => (
                          <React.Fragment key={i}>
                            ${deposit.toLocaleString()}
                            {i < agent.deposits.length - 1 ? ', ' : ''}
                          </React.Fragment>
                        ))}
                      </td>
                      <td>
                        <div style={{ display: "flex", alignItems: "center", flexWrap: "wrap", gap: "5px" }}>
                          {agent.deposits.map((deposit, i) => {
                            const imgFile = getBalloonImage(deposit);
                            return imgFile ? (
                              <div key={i} style={{ display: "flex", alignItems: "center", marginRight: "10px" }}>
                                <div style={balloonContainerStyle}>
                                  <img 
                                    src={imgFile}
                                    alt={"Balloon for " + agent.name}
                                    style={balloonImgStyle}
                                  />
                                </div>
                                {agent.cashPrizes[i] && (
                                  <span className="cash-prize">
                                    <i className="fas fa-trophy me-1"></i>
                                    ${agent.cashPrizes[i].toLocaleString()}
                                  </span>
                                )}
                              </div>
                            ) : (
                              <span key={i} className="text-muted">
                                <i className="fas fa-times-circle me-1"></i>No balloon
                              </span>
                            );
                          })}
                        </div>
                      </td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    // Компонент индикатора автоперезагрузки
    function AutoReloadIndicator() {
      const [timeLeft, setTimeLeft] = React.useState(900);
      
      React.useEffect(() => {
        const interval = setInterval(() => {
          setTimeLeft(prevTime => {
            if (prevTime <= 1) {
              window.location.reload();
              return 900;
            }
            return prevTime - 1;
          });
        }, 1000);
        
        return () => clearInterval(interval);
      }, []);
      
      // Форматирование времени
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      
      return (
        <div className="auto-reload-indicator">
          <i className="fas fa-sync-alt me-2"></i>
          Page reload in: {minutes}:{seconds < 10 ? '0' : ''}{seconds}
        </div>
      );
    }

    // Главный компонент приложения
    function App() {
      const agents = [
        { name: "Michele Zito", deposit: 3000, cashPrize: 100 },
        { name: "Andrea Feni", deposit: 10000, cashPrize: 100 },
        { name: "Alexander Hublin", deposit: 7500, cashPrize: 150 },
        { name: "Alexander Hublin", deposit: 2500, cashPrize: 250 },
        { name: "Phillip Novak", deposit: 1000, cashPrize: 150 },
        { name: "Noah Schmidt", deposit: 2000, cashPrize: 200 },
        { name: "Andrea Feni", deposit: 10000, cashPrize: 200 },
        { name: "Mateo Magas", deposit: 1000, cashPrize: 200 },
        { name: "Phillip Novak", deposit: 1000, cashPrize: 150 },
        { name: "Noah Schmidt", deposit: 1200, cashPrize: 100 },
        { name: "Ryan Walker", deposit: 1000, cashPrize: 250 },
        { name: "Felix Grogg", deposit: 1000, cashPrize: 250 },
      ];
      
      // Функция для автоперезагрузки страницы каждые 15 минут
      React.useEffect(() => {
        // 15 минут = 900000 миллисекунд
        const reloadTimer = setTimeout(() => {
          window.location.reload();
        }, 900000);
        
        return () => clearTimeout(reloadTimer);
      }, []);

      return (
        <div className="site-wrapper">
          <Confetti />
          <h1 className="main-heading">
            <i className="fas fa-gift me-3"></i>
            PROMOTION DAY - CASH PRIZES
            <i className="fas fa-gift ms-3"></i>
          </h1>
          <div className="container-fluid">
            <div className="row">
              <div className="col-lg-8">
                <Balloons />
                <AgentTable agents={agents} />
              </div>
              <div className="col-lg-4">
                <RulesSection />
              </div>
            </div>
          </div>
          <AutoReloadIndicator />
        </div>
      );
    }

    // Рендерим приложение
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>

  <!-- Подключаем Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
